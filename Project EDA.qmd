---
title: "Project EDA"
format: html
editor: visual
---

## Introduction

The Diabetes Health Indicators Dataset is a collection of over 250000 people's diabetic status (either diabetic or non-diabetic, this is the response variable of interest) along with several variables that include health and socioeconomic information. Among these variables include those which we will examine closely in this project: high/normal cholesterol, high/normal blood pressure, general health wellness, BMI, and physical activity.

The purpose of the EDA performed below is to import and clean the Diabetes Health dataset, afterwards the predictor variables of interest described above will be included in plots and tables that attempt to give us an initial idea about the distribution and influence that these predictor variables might have within the two groups of diabetic and non-diabetic patients. Eventually we will model the data to fully evaluate the influence and predict what health conditions of interest might be most likely to be displayed by diabetic patients.

## Data

To start off we will explore the diabetes data set, beginning with importing the data and then naming categorical variable factors that correspond to the number codes of categorical variables.
```{r}
library(tidyverse)
diabetes <- read.csv("diabetes_binary_health_indicators_BRFSS2015.csv")
colSums(is.na(diabetes))

map_list <- list(
  Diabetes_binary = c("No Diabetes", "Diabetes") |> setNames(c(0,1)),
  HighBP = c("Normal", "High BP") |> setNames(c(0,1)),
  HighChol = c("Normal", "High Chol") |> setNames(c(0,1)),
  CholCheck = c("No", "Yes") |> setNames(c(0,1)),
  Smoker = c("No", "Yes") |> setNames(c(0,1)),
  Stroke = c("No", "Yes") |> setNames(c(0,1)),
  HeartDiseaseorAttack = c("No", "Yes") |> setNames(c(0,1)),
  PhysActivity = c("No", "Yes") |> setNames(c(0,1)),
  Fruits = c("No", "Yes") |> setNames(c(0,1)),
  Veggies = c("No", "Yes") |> setNames(c(0,1)),
  HvyAlcoholConsump = c("No", "Yes") |> setNames(c(0,1)),
  AnyHealthcare = c("No", "Yes") |> setNames(c(0,1)),
  NoDocbcCost = c("No", "Yes") |> setNames(c(0,1)),
  DiffWalk = c("No", "Yes") |> setNames(c(0,1)),
  Sex = c("Female", "Male") |> setNames(c(0,1)),
  GenHlth = c("Excellent", "Very Good", "Good", "Fair", "Poor") |> setNames(1:5)
)

diabetes <- diabetes |>
  mutate(across(
    intersect(names(diabetes), names(map_list)), ~factor(.x, levels = names(map_list[[cur_column()]]), labels = map_list[[cur_column()]]
    )
  ))
```

## Summarizations

Now that we have the data set available and with factor levels defined, we will now get several summarizations of the data. For this data exploration and for when we make models to fit to the data, we will specifically look at five predictor variables that are suspected to correlate with diabetic conditions: high/normal cholesterol, high/normal blood pressure, patient's general health, BMI, and physical activity. To what extent these variables are associated with diabetic or non-diabetic patients will be investigated using EDA and modeling.
```{r}
#Based on this simple summary, we can see that there are about 35000 diabetic and about 218000 non-diabetic patients.
summary(diabetes$Diabetes_binary)

#Plotting a table to compare how number of patients with high/low cholesterol is split between diabetic and non-diabetic population
diabetes |> group_by(Diabetes_binary, HighChol) |> summarise(count = n())

#Similar to previous table but using high/low blood pressure as variable of interest
diabetes |> group_by(Diabetes_binary, HighBP) |> summarise(count = n())

#Boxplot to compare the distribution of BMI scores between diabetic and non-diabetic populations
diabetes |> ggplot(aes(x = Diabetes_binary, y = BMI)) + geom_boxplot() + theme_minimal() + labs(title = "Diabetes rate by BMI", x = "Diabetes", y = "BMI")

#Bar plot to compare the proportion of patients who are diabetic by whether they are physically active
diabetes |> ggplot(aes(x = Diabetes_binary, fill = PhysActivity)) + geom_bar(position = "fill") + theme_minimal() + labs(title = "Diabetes vs Physical Activity", x = "Diabetes", y = "Proportion")

#Boxplot to compare how the distribution of general health categories look between diabetic and non-diabetic populations
diabetes |> ggplot(aes(x = Diabetes_binary, fill = GenHlth)) + geom_bar(position = "dodge") + theme_minimal() + labs(title = "Diabetes rate by General Health", x = "Diabetes", y = "Count")
```

After looking at the plots and tables from our EDA, my initial predictions on how these predictor variables would vary between diabetic and non-diabetic populations aligns with what the graphs are suggesting. High cholesterol, high blood pressure, and lack of physical activity all exist at greater proportions in the diabetic community vs the non-diabetic. In addition, the distribution of BMIs among diabetics is shifted up compared to non-diabetics, and worse ratings of general health are more common proportionally within the diabetic community than the non-diabetic community. Now we will move on to the modeling portion of this analysis project, which will be continued on the Project Modeling.qmd file.
